{"functions":[{"name":"mod_chat_get_chat_latest_messages","component":"mod_chat","capabilities":"mod\/chat:chat","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatsid":{"class":"external_value","desc":"chat session id (obtained via mod_chat_login_user)","required":1,"default":null,"allownull":true,"type":"alphanum"},"chatlasttime":{"class":"external_value","desc":"last time messages were retrieved (epoch time)","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"messages":{"class":"external_multiple_structure","desc":"list of users","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"message id","required":1,"default":null,"allownull":true,"type":"int"},"userid":{"class":"external_value","desc":"user id","required":1,"default":null,"allownull":true,"type":"int"},"system":{"class":"external_value","desc":"true if is a system message (like user joined)","required":1,"default":null,"allownull":true,"type":"bool"},"message":{"class":"external_value","desc":"message text","required":1,"default":null,"allownull":true,"type":"raw"},"timestamp":{"class":"external_value","desc":"timestamp for the message","required":1,"default":null,"allownull":true,"type":"int"}}}},"chatnewlasttime":{"class":"external_value","desc":"new last time","required":1,"default":null,"allownull":true,"type":"int"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Get the latest messages from the given chat session.","type":"read","loginrequired":true,"readonlysession":false},{"name":"mod_chat_get_chat_users","component":"mod_chat","capabilities":"mod\/chat:chat","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatsid":{"class":"external_value","desc":"chat session id (obtained via mod_chat_login_user)","required":1,"default":null,"allownull":true,"type":"alphanum"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"users":{"class":"external_multiple_structure","desc":"list of users","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"user id","required":1,"default":null,"allownull":true,"type":"int"},"fullname":{"class":"external_value","desc":"user full name","required":1,"default":null,"allownull":true,"type":"notags"},"profileimageurl":{"class":"external_value","desc":"user picture URL","required":1,"default":null,"allownull":true,"type":"url"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Get the list of users in the given chat session.","type":"read","loginrequired":true,"readonlysession":false},{"name":"mod_chat_get_chats_by_courses","component":"mod_chat","capabilities":"","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"courseids":{"class":"external_multiple_structure","desc":"Array of course ids","required":0,"default":[],"content":{"class":"external_value","desc":"course id","required":1,"default":null,"allownull":true,"type":"int"}}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"chats":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"Chats","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"Activity instance id","required":1,"default":null,"allownull":true,"type":"int"},"coursemodule":{"class":"external_value","desc":"Course module id","required":1,"default":null,"allownull":true,"type":"int"},"course":{"class":"external_value","desc":"Course id","required":1,"default":null,"allownull":true,"type":"int"},"name":{"class":"external_value","desc":"Activity name","required":1,"default":null,"allownull":true,"type":"raw"},"intro":{"class":"external_value","desc":"Activity introduction","required":1,"default":null,"allownull":true,"type":"raw"},"introformat":{"class":"external_format_value,external_value","desc":"intro format (1 = HTML, 0 = MOODLE, 2 = PLAIN or 4 = MARKDOWN)","required":1,"default":null,"allownull":true,"type":"int"},"introfiles":{"class":"external_files,external_multiple_structure","desc":"Files in the introduction","required":2,"default":null,"content":{"class":"external_single_structure","desc":"File.","required":1,"default":null,"keys":{"filename":{"class":"external_value","desc":"File name.","required":2,"default":null,"allownull":true,"type":"file"},"filepath":{"class":"external_value","desc":"File path.","required":2,"default":null,"allownull":true,"type":"path"},"filesize":{"class":"external_value","desc":"File size.","required":2,"default":null,"allownull":true,"type":"int"},"fileurl":{"class":"external_value","desc":"Downloadable file url.","required":2,"default":null,"allownull":true,"type":"url"},"timemodified":{"class":"external_value","desc":"Time modified.","required":2,"default":null,"allownull":true,"type":"int"},"mimetype":{"class":"external_value","desc":"File mime type.","required":2,"default":null,"allownull":true,"type":"raw"},"isexternalfile":{"class":"external_value","desc":"Whether is an external file.","required":2,"default":null,"allownull":true,"type":"bool"},"repositorytype":{"class":"external_value","desc":"The repository type for external files.","required":2,"default":null,"allownull":true,"type":"plugin"}}}},"section":{"class":"external_value","desc":"Course section id","required":2,"default":null,"allownull":true,"type":"int"},"visible":{"class":"external_value","desc":"Visible","required":2,"default":null,"allownull":true,"type":"bool"},"groupmode":{"class":"external_value","desc":"Group mode","required":2,"default":null,"allownull":true,"type":"int"},"groupingid":{"class":"external_value","desc":"Group id","required":2,"default":null,"allownull":true,"type":"int"},"lang":{"class":"external_value","desc":"Forced activity language","required":2,"default":null,"allownull":true,"type":"safedir"},"chatmethod":{"class":"external_value","desc":"chat method (sockets, ajax, header_js)","required":2,"default":null,"allownull":true,"type":"plugin"},"keepdays":{"class":"external_value","desc":"keep days","required":2,"default":null,"allownull":true,"type":"int"},"studentlogs":{"class":"external_value","desc":"student logs visible to everyone","required":2,"default":null,"allownull":true,"type":"int"},"chattime":{"class":"external_value","desc":"chat time","required":2,"default":null,"allownull":true,"type":"int"},"schedule":{"class":"external_value","desc":"schedule type","required":2,"default":null,"allownull":true,"type":"int"},"timemodified":{"class":"external_value","desc":"time of last modification","required":2,"default":null,"allownull":true,"type":"int"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Returns a list of chat instances in a provided set of courses,\n                            if no courses are provided then all the chat instances the user has access to will be returned.","type":"read","loginrequired":true,"readonlysession":false},{"name":"mod_chat_get_session_messages","component":"mod_chat","capabilities":"","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatid":{"class":"external_value","desc":"Chat instance id.","required":1,"default":null,"allownull":true,"type":"int"},"sessionstart":{"class":"external_value","desc":"The session start time (timestamp).","required":1,"default":null,"allownull":true,"type":"int"},"sessionend":{"class":"external_value","desc":"The session end time (timestamp).","required":1,"default":null,"allownull":true,"type":"int"},"groupid":{"class":"external_value","desc":"Get messages from users in this group.\n                                                0 means that the function will determine the user group","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"messages":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"The message record id.","required":1,"default":null,"allownull":false,"type":"int"},"chatid":{"class":"external_value","desc":"The chat id.","required":1,"default":null,"allownull":false,"type":"int"},"userid":{"class":"external_value","desc":"The user who wrote the message.","required":1,"default":null,"allownull":false,"type":"int"},"groupid":{"class":"external_value","desc":"The group this message belongs to.","required":1,"default":null,"allownull":false,"type":"int"},"issystem":{"class":"external_value","desc":"Whether is a system message or not.","required":1,"default":null,"allownull":false,"type":"bool"},"message":{"class":"external_value","desc":"The message text.","required":1,"default":null,"allownull":false,"type":"raw"},"timestamp":{"class":"external_value","desc":"The message timestamp (indicates when the message was sent).","required":1,"default":null,"allownull":false,"type":"int"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Retrieves messages of the given chat session.","type":"read","loginrequired":true,"readonlysession":false},{"name":"mod_chat_get_sessions","component":"mod_chat","capabilities":"","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatid":{"class":"external_value","desc":"Chat instance id.","required":1,"default":null,"allownull":true,"type":"int"},"groupid":{"class":"external_value","desc":"Get messages from users in this group.\n                                                0 means that the function will determine the user group","required":0,"default":0,"allownull":true,"type":"int"},"showall":{"class":"external_value","desc":"Whether to show completed sessions or not.","required":0,"default":false,"allownull":true,"type":"bool"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"sessions":{"class":"external_multiple_structure","desc":"list of users","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"sessionstart":{"class":"external_value","desc":"Session start time.","required":1,"default":null,"allownull":true,"type":"int"},"sessionend":{"class":"external_value","desc":"Session end time.","required":1,"default":null,"allownull":true,"type":"int"},"sessionusers":{"class":"external_multiple_structure","desc":"Session users.","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"userid":{"class":"external_value","desc":"User id.","required":1,"default":null,"allownull":true,"type":"int"},"messagecount":{"class":"external_value","desc":"Number of messages in the session.","required":1,"default":null,"allownull":true,"type":"int"}}}},"iscomplete":{"class":"external_value","desc":"Whether the session is completed or not.","required":1,"default":null,"allownull":true,"type":"bool"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Retrieves chat sessions for a given chat.","type":"read","loginrequired":true,"readonlysession":false},{"name":"mod_chat_login_user","component":"mod_chat","capabilities":"mod\/chat:chat","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatid":{"class":"external_value","desc":"chat instance id","required":1,"default":null,"allownull":true,"type":"int"},"groupid":{"class":"external_value","desc":"group id, 0 means that the function will determine the user group","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"chatsid":{"class":"external_value","desc":"unique chat session id","required":1,"default":null,"allownull":true,"type":"alphanum"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Log a user into a chat room in the given chat.","type":"write","loginrequired":true,"readonlysession":false},{"name":"mod_chat_send_chat_message","component":"mod_chat","capabilities":"mod\/chat:chat","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatsid":{"class":"external_value","desc":"chat session id (obtained via mod_chat_login_user)","required":1,"default":null,"allownull":true,"type":"alphanum"},"messagetext":{"class":"external_value","desc":"the message text","required":1,"default":null,"allownull":true,"type":"raw"},"beepid":{"class":"external_value","desc":"the beep id","required":0,"default":"","allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"messageid":{"class":"external_value","desc":"message sent id","required":1,"default":null,"allownull":true,"type":"int"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Send a message on the given chat session.","type":"write","loginrequired":true,"readonlysession":false},{"name":"mod_chat_view_chat","component":"mod_chat","capabilities":"mod\/chat:chat","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"chatid":{"class":"external_value","desc":"chat instance id","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"status":{"class":"external_value","desc":"status: true if success","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Trigger the course module viewed event and update the module completion status.","type":"write","loginrequired":true,"readonlysession":false}]}
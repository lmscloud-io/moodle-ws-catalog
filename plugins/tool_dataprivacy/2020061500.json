{"functions":[{"name":"tool_dataprivacy_approve_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestid":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Approve a data request","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_bulk_approve_data_requests","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestids":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Bulk approve data requests","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_bulk_deny_data_requests","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestids":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Bulk deny data requests","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_cancel_data_request","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestid":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Cancel the data request made by the user","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_confirm_contexts_for_deletion","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"ids":{"class":"external_multiple_structure","desc":"Array of expired context record IDs","required":0,"default":[],"content":{"class":"external_value","desc":"Expired context record ID","required":1,"default":null,"allownull":true,"type":"int"}}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"Whether the record was properly marked for deletion or not","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Mark the selected expired contexts as confirmed for deletion","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_contact_dpo","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"message":{"class":"external_value","desc":"The user's message to the Data Protection Officer(s)","required":1,"default":null,"allownull":true,"type":"text"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Contact the site Data Protection Officer(s)","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_create_category_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"jsonformdata":{"class":"external_value","desc":"The data to create the category, encoded as a json array","required":1,"default":null,"allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"category":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"name":{"class":"external_value","desc":"The category name.","required":1,"default":null,"allownull":false,"type":"raw"},"description":{"class":"external_value","desc":"The category description.","required":1,"default":null,"allownull":true,"type":"raw"},"descriptionformat":{"class":"external_format_value,external_value","desc":"description format (1 = HTML, 0 = MOODLE, 2 = PLAIN or 4 = MARKDOWN)","required":0,"default":"1","allownull":true,"type":"int"},"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"timecreated":{"class":"external_value","desc":"timecreated","required":1,"default":null,"allownull":false,"type":"int"},"timemodified":{"class":"external_value","desc":"timemodified","required":1,"default":null,"allownull":false,"type":"int"},"usermodified":{"class":"external_value","desc":"usermodified","required":1,"default":null,"allownull":false,"type":"int"}}},"validationerrors":{"class":"external_value","desc":"Were there validation errors","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Adds a data category","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_create_purpose_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"jsonformdata":{"class":"external_value","desc":"The data to create the purpose, encoded as a json array","required":1,"default":null,"allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"purpose":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"name":{"class":"external_value","desc":"The purpose name.","required":1,"default":null,"allownull":false,"type":"raw"},"description":{"class":"external_value","desc":"The purpose description.","required":1,"default":null,"allownull":true,"type":"raw"},"descriptionformat":{"class":"external_format_value,external_value","desc":"description format (1 = HTML, 0 = MOODLE, 2 = PLAIN or 4 = MARKDOWN)","required":0,"default":"1","allownull":true,"type":"int"},"lawfulbases":{"class":"external_value","desc":"Comma-separated IDs matching records in tool_dataprivacy_lawfulbasis.","required":1,"default":null,"allownull":false,"type":"raw"},"sensitivedatareasons":{"class":"external_value","desc":"Comma-separated IDs matching records in tool_dataprivacy_sensitive","required":1,"default":null,"allownull":true,"type":"raw"},"retentionperiod":{"class":"external_value","desc":"Retention period. ISO_8601 durations format (as in DateInterval format).","required":1,"default":null,"allownull":false,"type":"alphanum"},"protected":{"class":"external_value","desc":"Data retention with higher precedent over user's request to be forgotten.","required":1,"default":null,"allownull":false,"type":"int"},"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"timecreated":{"class":"external_value","desc":"timecreated","required":1,"default":null,"allownull":false,"type":"int"},"timemodified":{"class":"external_value","desc":"timemodified","required":1,"default":null,"allownull":false,"type":"int"},"usermodified":{"class":"external_value","desc":"usermodified","required":1,"default":null,"allownull":false,"type":"int"},"formattedretentionperiod":{"class":"external_value","desc":"formattedretentionperiod","required":1,"default":null,"allownull":false,"type":"raw"},"formattedlawfulbases":{"class":"external_multiple_structure","desc":"formattedlawfulbases","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"name":{"class":"external_value","desc":"name","required":1,"default":null,"allownull":false,"type":"raw"},"description":{"class":"external_value","desc":"description","required":1,"default":null,"allownull":false,"type":"raw"}}}},"formattedsensitivedatareasons":{"class":"external_multiple_structure","desc":"formattedsensitivedatareasons","required":2,"default":null,"content":{"class":"external_single_structure","desc":"","required":2,"default":null,"keys":{"name":{"class":"external_value","desc":"name","required":1,"default":null,"allownull":false,"type":"raw"},"description":{"class":"external_value","desc":"description","required":1,"default":null,"allownull":false,"type":"raw"}}}},"roleoverrides":{"class":"external_value","desc":"roleoverrides","required":1,"default":null,"allownull":false,"type":"raw"}}},"validationerrors":{"class":"external_value","desc":"Were there validation errors","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Adds a data purpose","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_delete_category","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"The category ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Deletes an existing data category","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_delete_purpose","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"The purpose ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Deletes an existing data purpose","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_deny_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestid":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Deny a data request","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_activity_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"nodefaults":{"class":"external_value","desc":"Whether to fetch all activities or only those without defaults","required":0,"default":false,"allownull":true,"type":"bool"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"options":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"name":{"class":"external_value","desc":"The plugin name of the activity","required":1,"default":null,"allownull":true,"type":"text"},"displayname":{"class":"external_value","desc":"The display name of the activity","required":1,"default":null,"allownull":true,"type":"text"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Fetches a list of activity options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_category_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"includeinherit":{"class":"external_value","desc":"Include option \"Inherit\"","required":0,"default":true,"allownull":true,"type":"bool"},"includenotset":{"class":"external_value","desc":"Include option \"Not set\"","required":0,"default":false,"allownull":true,"type":"bool"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"options":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"The category ID","required":1,"default":null,"allownull":true,"type":"int"},"name":{"class":"external_value","desc":"The category name","required":1,"default":null,"allownull":true,"type":"text"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Fetches a list of data category options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestid":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"type":{"class":"external_value","desc":"type","required":1,"default":null,"allownull":false,"type":"int"},"comments":{"class":"external_value","desc":"comments","required":1,"default":null,"allownull":false,"type":"raw"},"commentsformat":{"class":"external_value","desc":"commentsformat","required":1,"default":null,"allownull":false,"type":"int"},"userid":{"class":"external_value","desc":"userid","required":1,"default":null,"allownull":false,"type":"int"},"requestedby":{"class":"external_value","desc":"requestedby","required":1,"default":null,"allownull":false,"type":"int"},"status":{"class":"external_value","desc":"status","required":1,"default":null,"allownull":false,"type":"int"},"dpo":{"class":"external_value","desc":"dpo","required":1,"default":null,"allownull":true,"type":"int"},"dpocomment":{"class":"external_value","desc":"dpocomment","required":1,"default":null,"allownull":true,"type":"raw"},"dpocommentformat":{"class":"external_value","desc":"dpocommentformat","required":1,"default":null,"allownull":false,"type":"int"},"systemapproved":{"class":"external_value","desc":"systemapproved","required":1,"default":null,"allownull":false,"type":"bool"},"creationmethod":{"class":"external_value","desc":"creationmethod","required":1,"default":null,"allownull":false,"type":"int"},"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"timecreated":{"class":"external_value","desc":"timecreated","required":1,"default":null,"allownull":false,"type":"int"},"timemodified":{"class":"external_value","desc":"timemodified","required":1,"default":null,"allownull":false,"type":"int"},"usermodified":{"class":"external_value","desc":"usermodified","required":1,"default":null,"allownull":false,"type":"int"},"foruser":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"email":{"class":"external_value","desc":"email","required":1,"default":null,"allownull":false,"type":"raw_trimmed"},"idnumber":{"class":"external_value","desc":"idnumber","required":1,"default":null,"allownull":false,"type":"raw"},"phone1":{"class":"external_value","desc":"phone1","required":1,"default":null,"allownull":false,"type":"notags"},"phone2":{"class":"external_value","desc":"phone2","required":1,"default":null,"allownull":false,"type":"notags"},"department":{"class":"external_value","desc":"department","required":1,"default":null,"allownull":false,"type":"raw"},"institution":{"class":"external_value","desc":"institution","required":1,"default":null,"allownull":false,"type":"raw"},"fullname":{"class":"external_value","desc":"fullname","required":1,"default":null,"allownull":false,"type":"raw"},"identity":{"class":"external_value","desc":"identity","required":1,"default":null,"allownull":false,"type":"raw"},"profileurl":{"class":"external_value","desc":"profileurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurl":{"class":"external_value","desc":"profileimageurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurlsmall":{"class":"external_value","desc":"profileimageurlsmall","required":1,"default":null,"allownull":false,"type":"url"}}},"requestedbyuser":{"class":"external_single_structure","desc":"","required":2,"default":null,"keys":{"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"email":{"class":"external_value","desc":"email","required":1,"default":null,"allownull":false,"type":"raw_trimmed"},"idnumber":{"class":"external_value","desc":"idnumber","required":1,"default":null,"allownull":false,"type":"raw"},"phone1":{"class":"external_value","desc":"phone1","required":1,"default":null,"allownull":false,"type":"notags"},"phone2":{"class":"external_value","desc":"phone2","required":1,"default":null,"allownull":false,"type":"notags"},"department":{"class":"external_value","desc":"department","required":1,"default":null,"allownull":false,"type":"raw"},"institution":{"class":"external_value","desc":"institution","required":1,"default":null,"allownull":false,"type":"raw"},"fullname":{"class":"external_value","desc":"fullname","required":1,"default":null,"allownull":false,"type":"raw"},"identity":{"class":"external_value","desc":"identity","required":1,"default":null,"allownull":false,"type":"raw"},"profileurl":{"class":"external_value","desc":"profileurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurl":{"class":"external_value","desc":"profileimageurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurlsmall":{"class":"external_value","desc":"profileimageurlsmall","required":1,"default":null,"allownull":false,"type":"url"}}},"dpouser":{"class":"external_single_structure","desc":"","required":2,"default":null,"keys":{"id":{"class":"external_value","desc":"id","required":1,"default":null,"allownull":false,"type":"int"},"email":{"class":"external_value","desc":"email","required":1,"default":null,"allownull":false,"type":"raw_trimmed"},"idnumber":{"class":"external_value","desc":"idnumber","required":1,"default":null,"allownull":false,"type":"raw"},"phone1":{"class":"external_value","desc":"phone1","required":1,"default":null,"allownull":false,"type":"notags"},"phone2":{"class":"external_value","desc":"phone2","required":1,"default":null,"allownull":false,"type":"notags"},"department":{"class":"external_value","desc":"department","required":1,"default":null,"allownull":false,"type":"raw"},"institution":{"class":"external_value","desc":"institution","required":1,"default":null,"allownull":false,"type":"raw"},"fullname":{"class":"external_value","desc":"fullname","required":1,"default":null,"allownull":false,"type":"raw"},"identity":{"class":"external_value","desc":"identity","required":1,"default":null,"allownull":false,"type":"raw"},"profileurl":{"class":"external_value","desc":"profileurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurl":{"class":"external_value","desc":"profileimageurl","required":1,"default":null,"allownull":false,"type":"url"},"profileimageurlsmall":{"class":"external_value","desc":"profileimageurlsmall","required":1,"default":null,"allownull":false,"type":"url"}}},"messagehtml":{"class":"external_value","desc":"messagehtml","required":2,"default":null,"allownull":false,"type":"raw"},"typename":{"class":"external_value","desc":"typename","required":1,"default":null,"allownull":false,"type":"raw"},"typenameshort":{"class":"external_value","desc":"typenameshort","required":1,"default":null,"allownull":false,"type":"raw"},"statuslabel":{"class":"external_value","desc":"statuslabel","required":1,"default":null,"allownull":false,"type":"raw"},"statuslabelclass":{"class":"external_value","desc":"statuslabelclass","required":1,"default":null,"allownull":false,"type":"raw"},"canreview":{"class":"external_value","desc":"canreview","required":2,"default":null,"allownull":false,"type":"bool"},"approvedeny":{"class":"external_value","desc":"approvedeny","required":2,"default":null,"allownull":false,"type":"bool"},"canmarkcomplete":{"class":"external_value","desc":"canmarkcomplete","required":2,"default":null,"allownull":false,"type":"bool"}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Fetch the details of a user's data request","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_purpose_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"includeinherit":{"class":"external_value","desc":"Include option \"Inherit\"","required":0,"default":true,"allownull":true,"type":"bool"},"includenotset":{"class":"external_value","desc":"Include option \"Not set\"","required":0,"default":false,"allownull":true,"type":"bool"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"options":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"The purpose ID","required":1,"default":null,"allownull":true,"type":"int"},"name":{"class":"external_value","desc":"The purpose name","required":1,"default":null,"allownull":true,"type":"text"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Fetches a list of data storage purpose options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_users","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"query":{"class":"external_value","desc":"The search query","required":1,"default":null,"allownull":true,"type":"text"}}},"returns_desc":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"id":{"class":"external_value","desc":"ID of the user","required":1,"default":null,"allownull":true,"type":"int"},"fullname":{"class":"external_value","desc":"The fullname of the user","required":1,"default":null,"allownull":true,"type":"notags"},"extrafields":{"class":"external_multiple_structure","desc":"List of extra fields","required":2,"default":null,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"name":{"class":"external_value","desc":"Name of the extrafield.","required":1,"default":null,"allownull":true,"type":"text"},"value":{"class":"external_value","desc":"Value of the extrafield.","required":1,"default":null,"allownull":true,"type":"text"}}}}}}},"description":"Fetches a list of users","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_mark_complete","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"requestid":{"class":"external_value","desc":"The request ID","required":1,"default":null,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"The processing result","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Mark a user's general enquiry as complete","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_context_defaults","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"contextlevel":{"class":"external_value","desc":"The context level","required":1,"default":null,"allownull":true,"type":"int"},"category":{"class":"external_value","desc":"The default category for the given context level","required":1,"default":null,"allownull":true,"type":"int"},"purpose":{"class":"external_value","desc":"The default purpose for the given context level","required":1,"default":null,"allownull":true,"type":"int"},"activity":{"class":"external_value","desc":"The plugin name of the activity","required":0,"default":null,"allownull":true,"type":"plugin"},"override":{"class":"external_value","desc":"Whether to override existing instances with the defaults","required":0,"default":false,"allownull":true,"type":"bool"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"Whether the context defaults were successfully set or not","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Updates the default category and purpose for a given context level (and optionally, a plugin)","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_context_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"jsonformdata":{"class":"external_value","desc":"The context level data, encoded as a json array","required":1,"default":null,"allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"Whether the data was properly set or not","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Sets purpose and category for a specific context","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_contextlevel_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"jsonformdata":{"class":"external_value","desc":"The context level data, encoded as a json array","required":1,"default":null,"allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"result":{"class":"external_value","desc":"Whether the data was properly set or not","required":1,"default":null,"allownull":true,"type":"bool"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Sets purpose and category across a context level","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_tree_extra_branches","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"keys":{"contextid":{"class":"external_value","desc":"The context id to expand","required":1,"default":null,"allownull":true,"type":"int"},"element":{"class":"external_value","desc":"The element we are interested on","required":1,"default":null,"allownull":true,"type":"alpha"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"keys":{"branches":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_single_structure","desc":"Node structure","required":2,"default":null,"keys":{"text":{"class":"external_value","desc":"The node text","required":1,"default":null,"allownull":true,"type":"text"},"expandcontextid":{"class":"external_value","desc":"The contextid this node expands","required":1,"default":null,"allownull":true,"type":"int"},"expandelement":{"class":"external_value","desc":"What element is this node expanded to","required":1,"default":null,"allownull":true,"type":"alpha"},"contextid":{"class":"external_value","desc":"The node contextid","required":1,"default":null,"allownull":true,"type":"int"},"contextlevel":{"class":"external_value","desc":"The node contextlevel","required":1,"default":null,"allownull":true,"type":"int"},"expanded":{"class":"external_value","desc":"Is it expanded","required":1,"default":null,"allownull":true,"type":"int"},"branches":{"class":"external_multiple_structure","desc":"Children node structure","required":2,"default":null,"content":{"class":"external_single_structure","desc":"Node structure","required":2,"default":null,"keys":{"text":{"class":"external_value","desc":"The node text","required":1,"default":null,"allownull":true,"type":"text"},"expandcontextid":{"class":"external_value","desc":"The contextid this node expands","required":1,"default":null,"allownull":true,"type":"int"},"expandelement":{"class":"external_value","desc":"What element is this node expanded to","required":1,"default":null,"allownull":true,"type":"alpha"},"contextid":{"class":"external_value","desc":"The node contextid","required":1,"default":null,"allownull":true,"type":"int"},"contextlevel":{"class":"external_value","desc":"The node contextlevel","required":1,"default":null,"allownull":true,"type":"int"},"expanded":{"class":"external_value","desc":"Is it expanded","required":1,"default":null,"allownull":true,"type":"int"},"branches":{"class":"external_multiple_structure","desc":"","required":1,"default":null,"content":{"class":"external_value","desc":"Nothing really, it will always be an empty array","required":2,"default":null,"allownull":true,"type":"text"}}}}}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"text"}}}}}},"description":"Return branches for the context tree","type":"write","loginrequired":true,"readonlysession":false}]}
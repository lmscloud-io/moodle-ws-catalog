{"functions":[{"name":"tool_dataprivacy_approve_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestid":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Approve a data request","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_bulk_approve_data_requests","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestids":{"class":"external_multiple_structure","content":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null},"desc":"","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Bulk approve data requests","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_bulk_deny_data_requests","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestids":{"class":"external_multiple_structure","content":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null},"desc":"","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Bulk deny data requests","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_cancel_data_request","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestid":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Cancel the data request made by the user","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_confirm_contexts_for_deletion","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"ids":{"class":"external_multiple_structure","content":{"class":"external_value","type":"int","allownull":true,"desc":"Expired context record ID","required":1,"default":null},"desc":"Array of expired context record IDs","required":0,"default":[]}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether the record was properly marked for deletion or not","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Mark the selected expired contexts as confirmed for deletion","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_contact_dpo","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"message":{"class":"external_value","type":"text","allownull":true,"desc":"The user's message to the Data Protection Officer(s)","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Contact the site Data Protection Officer(s)","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_create_category_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"jsonformdata":{"class":"external_value","type":"raw","allownull":true,"desc":"The data to create the category, encoded as a json array","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"category":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"raw","allownull":false,"desc":"The category name.","required":1,"default":null},"description":{"class":"external_value","type":"raw","allownull":true,"desc":"The category description.","required":1,"default":null},"descriptionformat":{"class":"external_format_value,external_value","type":"int","allownull":true,"desc":"description format (1 = HTML, 0 = MOODLE, 2 = PLAIN or 4 = MARKDOWN)","required":0,"default":"1"},"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"timecreated":{"class":"external_value","type":"int","allownull":false,"desc":"timecreated","required":1,"default":null},"timemodified":{"class":"external_value","type":"int","allownull":false,"desc":"timemodified","required":1,"default":null},"usermodified":{"class":"external_value","type":"int","allownull":false,"desc":"usermodified","required":1,"default":null}},"desc":"","required":1,"default":null},"validationerrors":{"class":"external_value","type":"bool","allownull":true,"desc":"Were there validation errors","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Adds a data category","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_create_purpose_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"jsonformdata":{"class":"external_value","type":"raw","allownull":true,"desc":"The data to create the purpose, encoded as a json array","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"purpose":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"raw","allownull":false,"desc":"The purpose name.","required":1,"default":null},"description":{"class":"external_value","type":"raw","allownull":true,"desc":"The purpose description.","required":1,"default":null},"descriptionformat":{"class":"external_format_value,external_value","type":"int","allownull":true,"desc":"description format (1 = HTML, 0 = MOODLE, 2 = PLAIN or 4 = MARKDOWN)","required":0,"default":"1"},"lawfulbases":{"class":"external_value","type":"raw","allownull":false,"desc":"Comma-separated IDs matching records in tool_dataprivacy_lawfulbasis.","required":1,"default":null},"sensitivedatareasons":{"class":"external_value","type":"raw","allownull":true,"desc":"Comma-separated IDs matching records in tool_dataprivacy_sensitive","required":1,"default":null},"retentionperiod":{"class":"external_value","type":"alphanum","allownull":false,"desc":"Retention period. ISO_8601 durations format (as in DateInterval format).","required":1,"default":null},"protected":{"class":"external_value","type":"int","allownull":false,"desc":"Data retention with higher precedent over user's request to be forgotten.","required":1,"default":null},"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"timecreated":{"class":"external_value","type":"int","allownull":false,"desc":"timecreated","required":1,"default":null},"timemodified":{"class":"external_value","type":"int","allownull":false,"desc":"timemodified","required":1,"default":null},"usermodified":{"class":"external_value","type":"int","allownull":false,"desc":"usermodified","required":1,"default":null},"formattedretentionperiod":{"class":"external_value","type":"raw","allownull":false,"desc":"formattedretentionperiod","required":1,"default":null},"formattedlawfulbases":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"raw","allownull":false,"desc":"name","required":1,"default":null},"description":{"class":"external_value","type":"raw","allownull":false,"desc":"description","required":1,"default":null}},"desc":"","required":1,"default":null},"desc":"formattedlawfulbases","required":1,"default":null},"formattedsensitivedatareasons":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"raw","allownull":false,"desc":"name","required":1,"default":null},"description":{"class":"external_value","type":"raw","allownull":false,"desc":"description","required":1,"default":null}},"desc":"","required":2,"default":null},"desc":"formattedsensitivedatareasons","required":2,"default":null},"roleoverrides":{"class":"external_value","type":"raw","allownull":false,"desc":"roleoverrides","required":1,"default":null}},"desc":"","required":1,"default":null},"validationerrors":{"class":"external_value","type":"bool","allownull":true,"desc":"Were there validation errors","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Adds a data purpose","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_delete_category","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":true,"desc":"The category ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Deletes an existing data category","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_delete_purpose","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":true,"desc":"The purpose ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Deletes an existing data purpose","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_deny_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestid":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Deny a data request","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_activity_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"nodefaults":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether to fetch all activities or only those without defaults","required":0,"default":false}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"options":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"text","allownull":true,"desc":"The plugin name of the activity","required":1,"default":null},"displayname":{"class":"external_value","type":"text","allownull":true,"desc":"The display name of the activity","required":1,"default":null}},"desc":"","required":1,"default":null},"desc":"","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Fetches a list of activity options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_category_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"includeinherit":{"class":"external_value","type":"bool","allownull":true,"desc":"Include option \"Inherit\"","required":0,"default":true},"includenotset":{"class":"external_value","type":"bool","allownull":true,"desc":"Include option \"Not set\"","required":0,"default":false}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"options":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":true,"desc":"The category ID","required":1,"default":null},"name":{"class":"external_value","type":"text","allownull":true,"desc":"The category name","required":1,"default":null}},"desc":"","required":1,"default":null},"desc":"","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Fetches a list of data category options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_data_request","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestid":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_single_structure","keys":{"type":{"class":"external_value","type":"int","allownull":false,"desc":"type","required":1,"default":null},"comments":{"class":"external_value","type":"raw","allownull":false,"desc":"comments","required":1,"default":null},"commentsformat":{"class":"external_value","type":"int","allownull":false,"desc":"commentsformat","required":1,"default":null},"userid":{"class":"external_value","type":"int","allownull":false,"desc":"userid","required":1,"default":null},"requestedby":{"class":"external_value","type":"int","allownull":false,"desc":"requestedby","required":1,"default":null},"status":{"class":"external_value","type":"int","allownull":false,"desc":"status","required":1,"default":null},"dpo":{"class":"external_value","type":"int","allownull":true,"desc":"dpo","required":1,"default":null},"dpocomment":{"class":"external_value","type":"raw","allownull":true,"desc":"dpocomment","required":1,"default":null},"dpocommentformat":{"class":"external_value","type":"int","allownull":false,"desc":"dpocommentformat","required":1,"default":null},"systemapproved":{"class":"external_value","type":"bool","allownull":false,"desc":"systemapproved","required":1,"default":null},"creationmethod":{"class":"external_value","type":"int","allownull":false,"desc":"creationmethod","required":1,"default":null},"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"timecreated":{"class":"external_value","type":"int","allownull":false,"desc":"timecreated","required":1,"default":null},"timemodified":{"class":"external_value","type":"int","allownull":false,"desc":"timemodified","required":1,"default":null},"usermodified":{"class":"external_value","type":"int","allownull":false,"desc":"usermodified","required":1,"default":null},"foruser":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"email":{"class":"external_value","type":"raw_trimmed","allownull":false,"desc":"email","required":1,"default":null},"idnumber":{"class":"external_value","type":"raw","allownull":false,"desc":"idnumber","required":1,"default":null},"phone1":{"class":"external_value","type":"notags","allownull":false,"desc":"phone1","required":1,"default":null},"phone2":{"class":"external_value","type":"notags","allownull":false,"desc":"phone2","required":1,"default":null},"department":{"class":"external_value","type":"raw","allownull":false,"desc":"department","required":1,"default":null},"institution":{"class":"external_value","type":"raw","allownull":false,"desc":"institution","required":1,"default":null},"fullname":{"class":"external_value","type":"raw","allownull":false,"desc":"fullname","required":1,"default":null},"identity":{"class":"external_value","type":"raw","allownull":false,"desc":"identity","required":1,"default":null},"profileurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileurl","required":1,"default":null},"profileimageurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurl","required":1,"default":null},"profileimageurlsmall":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurlsmall","required":1,"default":null}},"desc":"","required":1,"default":null},"requestedbyuser":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"email":{"class":"external_value","type":"raw_trimmed","allownull":false,"desc":"email","required":1,"default":null},"idnumber":{"class":"external_value","type":"raw","allownull":false,"desc":"idnumber","required":1,"default":null},"phone1":{"class":"external_value","type":"notags","allownull":false,"desc":"phone1","required":1,"default":null},"phone2":{"class":"external_value","type":"notags","allownull":false,"desc":"phone2","required":1,"default":null},"department":{"class":"external_value","type":"raw","allownull":false,"desc":"department","required":1,"default":null},"institution":{"class":"external_value","type":"raw","allownull":false,"desc":"institution","required":1,"default":null},"fullname":{"class":"external_value","type":"raw","allownull":false,"desc":"fullname","required":1,"default":null},"identity":{"class":"external_value","type":"raw","allownull":false,"desc":"identity","required":1,"default":null},"profileurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileurl","required":1,"default":null},"profileimageurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurl","required":1,"default":null},"profileimageurlsmall":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurlsmall","required":1,"default":null}},"desc":"","required":2,"default":null},"dpouser":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":false,"desc":"id","required":1,"default":null},"email":{"class":"external_value","type":"raw_trimmed","allownull":false,"desc":"email","required":1,"default":null},"idnumber":{"class":"external_value","type":"raw","allownull":false,"desc":"idnumber","required":1,"default":null},"phone1":{"class":"external_value","type":"notags","allownull":false,"desc":"phone1","required":1,"default":null},"phone2":{"class":"external_value","type":"notags","allownull":false,"desc":"phone2","required":1,"default":null},"department":{"class":"external_value","type":"raw","allownull":false,"desc":"department","required":1,"default":null},"institution":{"class":"external_value","type":"raw","allownull":false,"desc":"institution","required":1,"default":null},"fullname":{"class":"external_value","type":"raw","allownull":false,"desc":"fullname","required":1,"default":null},"identity":{"class":"external_value","type":"raw","allownull":false,"desc":"identity","required":1,"default":null},"profileurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileurl","required":1,"default":null},"profileimageurl":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurl","required":1,"default":null},"profileimageurlsmall":{"class":"external_value","type":"url","allownull":false,"desc":"profileimageurlsmall","required":1,"default":null}},"desc":"","required":2,"default":null},"messagehtml":{"class":"external_value","type":"raw","allownull":false,"desc":"messagehtml","required":2,"default":null},"typename":{"class":"external_value","type":"raw","allownull":false,"desc":"typename","required":1,"default":null},"typenameshort":{"class":"external_value","type":"raw","allownull":false,"desc":"typenameshort","required":1,"default":null},"statuslabel":{"class":"external_value","type":"raw","allownull":false,"desc":"statuslabel","required":1,"default":null},"statuslabelclass":{"class":"external_value","type":"raw","allownull":false,"desc":"statuslabelclass","required":1,"default":null},"canreview":{"class":"external_value","type":"bool","allownull":false,"desc":"canreview","required":2,"default":null},"approvedeny":{"class":"external_value","type":"bool","allownull":false,"desc":"approvedeny","required":2,"default":null},"canmarkcomplete":{"class":"external_value","type":"bool","allownull":false,"desc":"canmarkcomplete","required":2,"default":null}},"desc":"","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Fetch the details of a user's data request","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_purpose_options","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"includeinherit":{"class":"external_value","type":"bool","allownull":true,"desc":"Include option \"Inherit\"","required":0,"default":true},"includenotset":{"class":"external_value","type":"bool","allownull":true,"desc":"Include option \"Not set\"","required":0,"default":false}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"options":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":true,"desc":"The purpose ID","required":1,"default":null},"name":{"class":"external_value","type":"text","allownull":true,"desc":"The purpose name","required":1,"default":null}},"desc":"","required":1,"default":null},"desc":"","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Fetches a list of data storage purpose options","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_get_users","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"query":{"class":"external_value","type":"text","allownull":true,"desc":"The search query","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"id":{"class":"external_value","type":"int","allownull":true,"desc":"ID of the user","required":1,"default":null},"fullname":{"class":"external_value","type":"notags","allownull":true,"desc":"The fullname of the user","required":1,"default":null},"extrafields":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"name":{"class":"external_value","type":"text","allownull":true,"desc":"Name of the extrafield.","required":1,"default":null},"value":{"class":"external_value","type":"text","allownull":true,"desc":"Value of the extrafield.","required":1,"default":null}},"desc":"","required":1,"default":null},"desc":"List of extra fields","required":2,"default":null}},"desc":"","required":1,"default":null},"desc":"","required":1,"default":null},"description":"Fetches a list of users","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_mark_complete","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedatarequests","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"requestid":{"class":"external_value","type":"int","allownull":true,"desc":"The request ID","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"The processing result","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Mark a user's general enquiry as complete","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_context_defaults","component":"tool_dataprivacy","capabilities":"tool\/dataprivacy:managedataregistry","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"contextlevel":{"class":"external_value","type":"int","allownull":true,"desc":"The context level","required":1,"default":null},"category":{"class":"external_value","type":"int","allownull":true,"desc":"The default category for the given context level","required":1,"default":null},"purpose":{"class":"external_value","type":"int","allownull":true,"desc":"The default purpose for the given context level","required":1,"default":null},"activity":{"class":"external_value","type":"plugin","allownull":true,"desc":"The plugin name of the activity","required":0,"default":null},"override":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether to override existing instances with the defaults","required":0,"default":false}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether the context defaults were successfully set or not","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Updates the default category and purpose for a given context level (and optionally, a plugin)","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_context_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"jsonformdata":{"class":"external_value","type":"raw","allownull":true,"desc":"The context level data, encoded as a json array","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether the data was properly set or not","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Sets purpose and category for a specific context","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_set_contextlevel_form","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"jsonformdata":{"class":"external_value","type":"raw","allownull":true,"desc":"The context level data, encoded as a json array","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"result":{"class":"external_value","type":"bool","allownull":true,"desc":"Whether the data was properly set or not","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Sets purpose and category across a context level","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_dataprivacy_tree_extra_branches","component":"tool_dataprivacy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","keys":{"contextid":{"class":"external_value","type":"int","allownull":true,"desc":"The context id to expand","required":1,"default":null},"element":{"class":"external_value","type":"alpha","allownull":true,"desc":"The element we are interested on","required":1,"default":null}},"desc":"","required":1,"default":null},"returns_desc":{"class":"external_single_structure","keys":{"branches":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"text":{"class":"external_value","type":"raw","allownull":true,"desc":"The node text","required":1,"default":null},"expandcontextid":{"class":"external_value","type":"int","allownull":true,"desc":"The contextid this node expands","required":1,"default":null},"expandelement":{"class":"external_value","type":"alpha","allownull":true,"desc":"What element is this node expanded to","required":1,"default":null},"contextid":{"class":"external_value","type":"int","allownull":true,"desc":"The node contextid","required":1,"default":null},"contextlevel":{"class":"external_value","type":"int","allownull":true,"desc":"The node contextlevel","required":1,"default":null},"expanded":{"class":"external_value","type":"int","allownull":true,"desc":"Is it expanded","required":1,"default":null},"branches":{"class":"external_multiple_structure","content":{"class":"external_single_structure","keys":{"text":{"class":"external_value","type":"raw","allownull":true,"desc":"The node text","required":1,"default":null},"expandcontextid":{"class":"external_value","type":"int","allownull":true,"desc":"The contextid this node expands","required":1,"default":null},"expandelement":{"class":"external_value","type":"alpha","allownull":true,"desc":"What element is this node expanded to","required":1,"default":null},"contextid":{"class":"external_value","type":"int","allownull":true,"desc":"The node contextid","required":1,"default":null},"contextlevel":{"class":"external_value","type":"int","allownull":true,"desc":"The node contextlevel","required":1,"default":null},"expanded":{"class":"external_value","type":"int","allownull":true,"desc":"Is it expanded","required":1,"default":null},"branches":{"class":"external_multiple_structure","content":{"class":"external_value","type":"text","allownull":true,"desc":"Nothing really, it will always be an empty array","required":2,"default":null},"desc":"","required":1,"default":null}},"desc":"Node structure","required":2,"default":null},"desc":"Children node structure","required":2,"default":null}},"desc":"Node structure","required":2,"default":null},"desc":"","required":1,"default":null},"warnings":{"class":"external_warnings,external_multiple_structure","content":{"class":"external_single_structure","keys":{"item":{"class":"external_value","type":"text","allownull":true,"desc":"item","required":2,"default":null},"itemid":{"class":"external_value","type":"int","allownull":true,"desc":"item id","required":2,"default":null},"warningcode":{"class":"external_value","type":"alphanum","allownull":true,"desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null},"message":{"class":"external_value","type":"text","allownull":true,"desc":"untranslated english message to explain the warning","required":1,"default":null}},"desc":"warning","required":1,"default":null},"desc":"list of warnings","required":2,"default":null}},"desc":"","required":1,"default":null},"description":"Return branches for the context tree","type":"write","loginrequired":true,"readonlysession":false}]}
{"functions":[{"name":"tool_policy_get_policy_version","component":"tool_policy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"versionid":{"class":"external_value","desc":"The policy version ID","required":1,"default":null,"allownull":true,"type":"int"},"behalfid":{"class":"external_value","desc":"The id of user on whose behalf the user is viewing the policy","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"result":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"policy":{"class":"external_single_structure","desc":"Policy information","required":2,"default":null,"allownull":false,"keys":{"name":{"class":"external_value","desc":"The policy version name","required":2,"default":null,"allownull":true,"type":"raw"},"versionid":{"class":"external_value","desc":"The policy version id","required":2,"default":null,"allownull":true,"type":"int"},"content":{"class":"external_value","desc":"The policy version content","required":2,"default":null,"allownull":true,"type":"raw"}}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"allownull":false,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"allownull":false,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Fetch the details of a policy version","type":"read","loginrequired":false,"readonlysession":false},{"name":"tool_policy_get_user_acceptances","component":"tool_policy","capabilities":"","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"userid":{"class":"external_value","desc":"The user id we want to retrieve the acceptances.","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"policies":{"class":"external_multiple_structure","desc":"Policies and acceptance status for the given user.","required":2,"default":null,"allownull":false,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"policyid":{"class":"external_value","desc":"The policy id.","required":1,"default":null,"allownull":true,"type":"int"},"versionid":{"class":"external_value","desc":"The policy version id.","required":1,"default":null,"allownull":true,"type":"int"},"agreementstyle":{"class":"external_value","desc":"The policy agreement style. 0: consent page, 1: own page.","required":1,"default":null,"allownull":true,"type":"int"},"optional":{"class":"external_value","desc":"Whether the policy is optional. 0: compulsory, 1: optional","required":1,"default":null,"allownull":true,"type":"int"},"revision":{"class":"external_value","desc":"The policy revision.","required":1,"default":null,"allownull":true,"type":"text"},"status":{"class":"external_value","desc":"The policy status. 0: draft, 1: active, 2: archived.","required":1,"default":null,"allownull":true,"type":"int"},"name":{"class":"external_value","desc":"The policy name","required":1,"default":null,"allownull":true,"type":"text"},"summary":{"class":"external_value","desc":"The policy summary.","required":2,"default":null,"allownull":true,"type":"raw"},"summaryformat":{"class":"external_format_value,external_value","desc":"summary format (1 = HTML, 0 = MOODLE, 2 = PLAIN, or 4 = MARKDOWN)","required":1,"default":null,"allownull":true,"type":"int"},"content":{"class":"external_value","desc":"The policy content.","required":2,"default":null,"allownull":true,"type":"raw"},"contentformat":{"class":"external_format_value,external_value","desc":"content format (1 = HTML, 0 = MOODLE, 2 = PLAIN, or 4 = MARKDOWN)","required":1,"default":null,"allownull":true,"type":"int"},"acceptance":{"class":"external_single_structure","desc":"Acceptance status for the given user.","required":2,"default":null,"allownull":false,"keys":{"status":{"class":"external_value","desc":"The acceptance status. 0: declined, 1: accepted.","required":1,"default":null,"allownull":true,"type":"int"},"lang":{"class":"external_value","desc":"The policy lang.","required":1,"default":null,"allownull":true,"type":"lang","enum":["en"]},"timemodified":{"class":"external_value","desc":"The time the acceptance was set.","required":1,"default":null,"allownull":true,"type":"int"},"usermodified":{"class":"external_value","desc":"The user who accepted.","required":1,"default":null,"allownull":true,"type":"int"},"note":{"class":"external_value","desc":"The policy note\/remarks.","required":2,"default":null,"allownull":true,"type":"text"},"modfullname":{"class":"external_value","desc":"The fullname who accepted on behalf.","required":2,"default":null,"allownull":true,"type":"notags"}}},"canaccept":{"class":"external_value","desc":"Whether the policy can be accepted.","required":1,"default":null,"allownull":true,"type":"bool"},"candecline":{"class":"external_value","desc":"Whether the policy can be declined.","required":1,"default":null,"allownull":true,"type":"bool"},"canrevoke":{"class":"external_value","desc":"Whether the policy can be revoked.","required":1,"default":null,"allownull":true,"type":"bool"}}}},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"allownull":false,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"allownull":false,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Get user policies acceptances.","type":"read","loginrequired":true,"readonlysession":false},{"name":"tool_policy_set_acceptances_status","component":"tool_policy","capabilities":"","services":"moodle_mobile_app","allowed_from_ajax":false,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"policies":{"class":"external_multiple_structure","desc":"Policies acceptances for the given user.","required":1,"default":null,"allownull":false,"content":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"versionid":{"class":"external_value","desc":"The policy version id.","required":1,"default":null,"allownull":true,"type":"int"},"status":{"class":"external_value","desc":"The policy acceptance status. 0: decline, 1: accept.","required":1,"default":null,"allownull":true,"type":"int"},"note":{"class":"external_value","desc":"Any comments added by a user when giving consent on behalf of another user.","required":2,"default":null,"allownull":true,"type":"notags"}}}},"userid":{"class":"external_value","desc":"The user id we want to set the acceptances. Default is the current user.","required":0,"default":0,"allownull":true,"type":"int"}}},"returns_desc":{"class":"external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"policyagreed":{"class":"external_value","desc":"Whether the user has provided acceptance to all current site policies. 1 if yes, 0 if not","required":1,"default":null,"allownull":true,"type":"int"},"warnings":{"class":"external_warnings,external_multiple_structure","desc":"list of warnings","required":2,"default":null,"allownull":false,"content":{"class":"external_single_structure","desc":"warning","required":1,"default":null,"allownull":false,"keys":{"item":{"class":"external_value","desc":"item","required":2,"default":null,"allownull":true,"type":"text"},"itemid":{"class":"external_value","desc":"item id","required":2,"default":null,"allownull":true,"type":"int"},"warningcode":{"class":"external_value","desc":"the warning code can be used by the client app to implement specific behaviour","required":1,"default":null,"allownull":true,"type":"alphanum"},"message":{"class":"external_value","desc":"untranslated english message to explain the warning","required":1,"default":null,"allownull":true,"type":"raw"}}}}}},"description":"Set the acceptance status (accept or decline only) for the indicated policies for the given user.","type":"write","loginrequired":true,"readonlysession":false},{"name":"tool_policy_submit_accept_on_behalf","component":"tool_policy","capabilities":"","services":null,"allowed_from_ajax":true,"parameters_desc":{"class":"external_function_parameters,external_single_structure","desc":"","required":1,"default":null,"allownull":false,"keys":{"jsonformdata":{"class":"external_value","desc":"The data from the create group form, encoded as a json array","required":1,"default":null,"allownull":true,"type":"raw"}}},"returns_desc":{"class":"external_value","desc":"success","required":1,"default":null,"allownull":true,"type":"bool"},"description":"Accept policies on behalf of other users","type":"write","loginrequired":true,"readonlysession":false}]}